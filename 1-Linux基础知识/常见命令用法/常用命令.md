## 设置命令提示符（PS1）的显示格式

```bash
export PS1="[\t \u@\h \W]"
```

- **PS1**：环境变量，用于定义命令提示符的显示格式
- **[\t]**：代表当前时间的格式。\t 表示当前时间（HH:MM:SS）;
- **[\u]**：代表当前用户名；
- **[@\h]**：代表 "@" 符号后跟的当前主机名
- **[\W]：当前工作目录的路径，大写 W 给相对路径，小写 w 为绝对路径





## 清华大学软件镜像站

```bash
https://mirrors.tuna.tsinghua.edu.cn/help/ubuntu/
```

## 中文man手册安装

```shell
wget  https://src.fedoraproject.org/repo/pkgs/man-pages-zh-CN/manpages-zh-1.5.1.tar.gz/13275fd039de8788b15151c896150bc4/manpages-zh-1.5.1.tar.gz
tar fx manpages-zh-1.5.1.tar.gz 
cd manpages-zh-1.5.1
./configure --disable-zhtw  --prefix=/usr/local/zhman
make && make install
echo "alias cman='man -M /usr/local/zhman/share/man/zh_CN' " >>/root/.bash_profile
source .bash_profile
```

## history历史命令添加时间戳

- linux系统中经常会使用的`history`命令来查看历史命令，但是，一般的`history`命令只显示历史命令，并没有显示历史什么时间执行的命令，如下图所示：

![image-20230821154407876](https://niuzhan-1306014148.cos.ap-beijing.myqcloud.com/Typora/image-20230821154407876.png)

###  历史命令添加时间戳的两种方式

- 一、临时添加

  ```
  # export HISTTIMEFORMAT="%F %T"'
  ```

- 二、添加到`/etc/profile`文件中

- ```
  # echo export HISTTIMEFORMAT="%F %T  " >> /etc/profile
  # source /etc/profile
  ```



#####  最终效果如下

![image-20230825113259378](https://niuzhan-1306014148.cos.ap-beijing.myqcloud.com/Typora/image-20230825113259378.png)





## 常用命令快捷键

- 有时候调用历史命令，都是很长的那种，然后发现并不是自己想要的，需要重新输入，如何快速删除已有/已输入的命令/内容？ 或者说，比如我输入了 # ps -aux | grep yum，这个命令还没执行，现在我不想用这个命令了，如果快速删除已输入的内容，也就是# ps -aux | grep yum？
- 直接按Ctrl + c  终止当前命令，结束当前命令
- 较长时间的快捷键

```bash
ctrl + w —往回删除一个单词，光标放在最末尾 
ctrl + k —往前删除到末尾，光标放在最前面（可以使用ctrl+a） 
ctrl + u 删除光标以前的字符 
ctrl + k 删除光标以后的字符 
ctrl + a 移动光标至命令头部 
ctrl + e 移动光标至命令尾部 
ctrl + l 清屏
```

## 文件的三个时间

**access time（atime）**：访问时间，读取一次文件内容，该时间就会更新；

**modify time（mtime）**：修改时间，对文件内容进行一次修改就会更新该时间；

**change time（ctime）**：状态改变时间，更改文件的属性会更新该时间，比如更改文件权限，或者使用其他命令修改文件的隐藏权限

- 查看文件的三个时间

```bash
stat anaconda-ks.cfg 

# 返回结果
  File: ‘anaconda-ks.cfg’
  Size: 1672            Blocks: 8          IO Block: 4096   regular file
Device: fd00h/64768d    Inode: 102         Links: 1
Access: (0600/-rw-------)  Uid: (    0/    root)   Gid: (    0/    root)
Access: 2022-02-14 14:55:47.367905100 +0800    # 访问时间
Modify: 2022-02-14 14:41:41.688000000 +0800    # 修改时间
Change: 2022-02-14 14:41:41.688000000 +0800    # 状态改变时间
 Birth: -
```



## 查看openssh和openssl版本

```bash
[root@localhost ~]# ssh -V
OpenSSH_7.4p1, OpenSSL 1.0.2k-fips  26 Jan 2017
```



## 重读磁盘分区表

```bash
partprobe /dev/sdb
```



## 下载rpm包及依赖

```bash
repotrack xxx
```

## 创建镜像拉取认证

```
`for i in `kubectl get secrets --all-namespaces|grep myregistrykey|awk '{print $1}'`; do kubectl delete secret myregistrykey -n $i; kubectl create secret docker-registry myregistrykey --docker-server=192.168.124.43:8002 --docker-username=admin --docker-password=admin123 -n $i ; done
```

or

```
#!/bin/bash
#

for i in `kubectl get secrets --all-namespaces|grep myregistrykey|awk '{print $1}'`; do
    kubectl delete secret myregistrykey -n $i
    kubectl create secret docker-registry myregistrykey --docker-server=192.168.124.43:8002 --docker-username=admin --docker-password=admin123 -n $i
done
```

## 强制登出已登录用户

有些时候为了需求，需要让一些登录到Linux的普通用户退出，可以使用pkill命令
- 首先查看活动用户使用命令`w`
![image-20230825113427594](https://niuzhan-1306014148.cos.ap-beijing.myqcloud.com/Typora/image-20230825113427594.png)

- 显示说明
  | USER         | TTY      | FROM           | LOGIN@   | IDLE                                     | JCPU                                                         | PCPU                             | WHAT                   |
  | ------------ | -------- | -------------- | -------- | ---------------------------------------- | ------------------------------------------------------------ | -------------------------------- | ---------------------- |
  | 当前活动用户 | 终端名称 | 远程登录主机名 | 登录时间 | 空闲时间，从用户上一次任务结束后开始计时 | 以终端号来区分，表示在某段时间内，所有与该终端相关的进程任务所耗费的CPU时间 | 值what域的任务执行后所耗费的时间 | 当前正在运行进程的命令 |

- 强制活动用户退出：`pkill`
  
  - 可以使用 `pkill -kill -t[TTY]` 命令来完成，其中[TTY]为w命令所显示的终端名称。



## 临时分割日志文件

- 查看日志中文件日志开头的字段，使用grep过滤重定向

```
grep -r "2023-10-23T" taskflow-worker-pawucdpcnd07.out > /tmp/test.log
```



### 查看磁盘下最新的文件

```
find /data1 -mtime -5 -type f -name "*" -exec ls -lh --time-style=long-iso {} \;
```

### k8s configmap格式化

```
kubectl get cm agilesecu-f598a80e-application.dev.yml -o json | jq '.data."application-dev.yml"' -r
```

### 查看线程数

```bash
pstree

ps -eLf | grep taskflow
```

### 压缩解压缩

```bash
zip -r prometheus_v2.41.0.zip prometheus    # 压缩

zip -u prometheus_v2.41.0.zip prometheus/1.sh  # 往压缩包里添加新文件
```

