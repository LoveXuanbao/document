# 创建ipset

```bash
firewall-cmd --permanent --new-ipset=acl_admin --type=hash:net

firewall-cmd --permanent --zone=public --add-rich-rule 'rule family="ipv4" source ipset="acl_admin" accept'

firewall-cmd --permanent --zone=public --ipset=acl_admin --add-entry=10.7.16.1/24
```



# 移除规则

```bash
firewall-cmd --permanent --zone=public --ipset=acl_admin --remove-entry=10.7.0.0/16
```





## 添加防火墙白名单

```bash
[root@f14kl-k8s-004 sysadm]# firewall-cmd  --zone=public --change-interface=ens160
success
[root@f14kl-k8s-004 sysadm]# firewall-cmd --add-rich-rule="rule family=ipv4 source address=11.2.208.0/24 accept"
success
[root@f14kl-k8s-004 sysadm]# firewall-cmd --add-rich-rule="rule family=ipv4 source address=11.53.101.0/24 accept"
success
[root@f14kl-k8s-004 sysadm]# firewall-cmd --list-all

[root@f14kl-k8s-004 sysadm]# ipset list
```



### 拒绝非允许的主机访问指定端口

```
iptables -I INPUT 1 -p tcp --dport 3306 -m iprange ! --src-range 10.211.3.53-10.211.3.56 -j DROP
```

